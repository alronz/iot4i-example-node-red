# Overview
The goal of this node-red application is to show how to use [node-red-contrib-ibm-ioti](https://github.com/alronz/node-red-contrib-ibm-ioti) to create a simple UI that interacts with the IBM service [IoT for insurance](https://console.ng.bluemix.net/docs/services/IotInsurance/index.html) supported APIs as explained in the [iot-for-insurance-api-examples](https://github.com/IBM-Bluemix/iot4i-api-examples-nodejs/#iot-for-insurance-api-examples). 


# How to run

This application is designed to be deployed and run in IBM Bluemix. In order to that, just click the below button. 

[![Deploy to Bluemix](https://bluemix.net/deploy/button.png)](https://bluemix.net/deploy?repository=https://github.com/alronz/iot4i-example-node-red.git)

After deploying the application, you can access the node-red editor from the main page, then you can find the node-red flow used in this application. To check the UI generated by this node-red flow, you can access it under the route "**/ui**".

To add security for the node-red editor, you can set the below environmental variables in the app dashboard in Bluemix then restart the app:

```
NODE_RED_USERNAME // the user name
NODE_RED_PASSWORD // the passowrd
``` 


# Connect the app to IBM IoT for Insurance service

The application can be connected to the IoT for Insurance service using different options as explained below:
- Bind the IoT for insurance service to the app then restart the app.
- Manually enter the service credentials in the UI under "**Configure**" tab
- Manually enter the service credentials in the node settings using node-red editor.


# Flow used

The flow used in this application can be found in [flow.json](./defaults/flow.json). A screenshot of how the flow looks like in node-red editor is shown below:

![The node-red flow](images/flow.png "Node-Red flow")

# UI generated

Below is a screenshot of the UI generated:
 
![Ui generated](images/UI.png "UI")
 